version: "2.0"

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
intents:
- order_status
- order_cancel
- return
- product_stock
- product_updates
- affirm
- deny
- inform
- greet
- chitchat
- faq
- out_of_scope
entities:
- email
- color
- number
responses:
  utter_greet:
  - text: "Hi there! I'm a demo bot from Rasa to help you with ordering shoes. How can I help you?"
    buttons:
    - title: "Check status of my order"
      payload: "Check status of my order"
    - title: "Start a return"
      payload: "Start a return"
    - title: "Check inventory"
      payload: "Check inventory"
    - title: "Subscribe to product updates"
      payload: "Subscribe to product updates"

  utter_ask_rephrase:
  - text: I don't think I understand. Can you try providing more detail?
  - text: um, what did you just say to me?
  - text: beep, boop, don't understand

  utter_ask_order_status_form_email:
  - text: I can help you find the status of your order. What's your email address so I can find the order?
  utter_order_status:
  - text: Based on the latest order from {email}, it looks like your order should arrive in a few days.
  # - text: Your order is showing as delivered.
  # - text: Your order is still processing.
  
  utter_ask_cancel_form_email:
  - text: Sorry to hear you want to cancel! To help find your order, can you please provide your email address?
  utter_order_cancel_finish:
  - text: Ok, I've cancelled your order. If you'd like to reorder, please visit your recent orders in your account history.
  
  utter_ask_return_form_email:
  - text: Let's start that return. To help find your order, can you please provide your email address?
  utter_return_finish:
  - text: Ok, I've kicked off your return. You should be receiving a return label in your inbox. Please send it in the next 14 days!
  
  utter_ask_product_updates_form_email:
  - text: I can keep you up to date with our weekly email about product updates! If you'd like to be added to the list, please add your email address.
  utter_product_updates_finish:
  - text: Alright, you're subscribed!
  
  utter_product_stock_start:
  - text: I can help you find some shoes!
  utter_ask_product_stock_form_number:
  - text: What size shoe would you like?
  utter_ask_product_stock_form_color:
  - text: What color are you looking for?
  utter_product_stock_finish: # will change this to query sqlite with search criteria
  - text: Looks like we have size {number} {color} shoes in stock!

  utter_confirm_email:
  - text: I already have your email on file. Would you like me to look up your order under {email}?

  # faq responses
  utter_faq/alternate_info:
  - text: Currenty we can only provide order information based on email. 
  utter_faq/sizing_clarification:
  - text: Right now we only offer American sizes. We'll try to change this in the future!
  utter_faq/payment_methods:
  - text: We accept all major credit cards, Apple Pay, Google Pay, and PayPal.
  utter_faq/promotions:
  - text: Currently, we're running a buy one get one half off promotion!

  # chitchat responses
  utter_chitchat/thanks:
  - text: No problem!
  - text: I have no choice but to help you.
  - text: I try my best
  utter_chitchat/confirm_presence:
  - text: yep I'm here.
  - text: unfortunately, I'm still listening.
  utter_chitchat/capabilities:
  - text: I can help you start a return, subscribe to our emails, and even see if we carry your desired shoes.
  utter_chitchat/mood_great:
  - text: Superb!
  - text: right on
  utter_chitchat/mood_unhappy:
  - text: sorry to hear that :(
  - text: ok can you be nice to me
  utter_chitchat/bot_challenge:
  - text: I'm a bot, built using Rasa! Beep boop

  utter_chitchat/goodbye:
  - text: bye bye
  - text: c u l8er allig8er


slots:
  email:
    type: text
    influence_conversation: false
  number: # should be duckling entity
    type: text
    influence_conversation: false
  color:
    type: text
    influence_conversation: false
  verified_email:
    type: bool
    influence_conversation: true

forms:
  order_status_form:
    email:
      - type: from_entity
        entity: email
      - intent:
        - inform
        type: from_text
  cancel_form:
    email:
      - type: from_entity
        entity: email   
  return_form:
    email:
      - type: from_entity
        entity: email   
  product_updates_form:
    email:
      - type: from_entity
        entity: email   
  product_stock_form:
    number:
      - type: from_entity
        entity: number
    color:
      - type: from_entity
        entity: color

actions: 
  - action_product_search